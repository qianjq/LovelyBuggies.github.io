---
layout:     post
title:      Score Chain - a simple Dapp
subtitle:   æ™ºèƒ½åˆçº¦éƒ¨ç½²å’Œå®¢æˆ·ç«¯å®ç°
date:       2018-12-17
author:     Nino Lau
header-img: img/post-bg-os-metro.jpg
catalog: true
tags:
    - å®éªŒ
    - åŒºå—é“¾

---


> æ ¹æ®[å»ä¸­å¿ƒåŒ–çš„è¯¾ç¨‹è¯„åˆ†ç³»ç»Ÿç™½çš®ä¹¦](https://github.com/LovelyBuggies/Solidity_ScoreChain_Dapp/blob/master/OpeningReport/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E7%9A%84%E8%AF%BE%E7%A8%8B%E8%AF%84%E5%88%86%E7%B3%BB%E7%BB%9F%E7%99%BD%E7%9A%AE%E4%B9%A6.md)ï¼Œæˆ‘ä»¬è‰æ‹Ÿäº†è¯„åˆ†ç³»ç»Ÿåˆçº¦ï¼Œå®ç°äº†æ‰“åˆ†å¯è¿½æº¯å’Œæ‰“åˆ†æ¬¡æ•°è®°å½•ç­‰åŸºæœ¬åŠŸèƒ½ï¼Œå¹¶å°†å…¶éƒ¨ç½²åœ¨äº†ç§æœ‰é“¾ä¸Šã€‚æ­¤å¤–ï¼Œåˆæ­¥å®ç°äº†DAPPåŠŸèƒ½ï¼Œå¹¶ç”¨ node.js æ­å»ºäº†é¡µé¢ã€‚æœªæ¥çš„è®¡åˆ’åŒ…æ‹¬ï¼šæ‰“åˆ†åˆçº¦çš„æ’°å†™å’Œéƒ¨ç½²ï¼Œä»¥åŠæ‰“åˆ†ç•Œé¢çš„è®¾è®¡å’Œä¼˜åŒ–ã€‚

---

## å®éªŒä¾èµ–

### Node.js 

[èŠ‚ç‚¹åŒ…ç®¡ç†å™¨ï¼ˆNPMï¼‰](http://nodejs.org/en/)åœ¨æœ¬æ¬¡å®éªŒä¸­ä½œä¸ºwebå¼€å‘çš„å·¥å…·ã€‚å®¶å–»æˆ·æ™“çš„npmè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œç”¨homebrewå®‰è£…node.jsï¼š

```shell
brew install node 
```

æ˜¾ç¤ºç‰ˆæœ¬æˆåŠŸä¸ºå®‰è£…å¥½äº†ï¼š

```shell
npm -v
```



### Truffle

[Truffle](http://truffleframework.com/)ğŸ°ï¼ˆæ¾éœ²ï¼‰â€”â€”â€œ*èªæ˜çš„åˆåŒæ›´ç”œèœœ*â€ï¼Œæ˜¯ä¸€ä¸ªç®€æ´çš„æ™ºèƒ½åˆçº¦å¼€å‘æ¡†æ¶ã€‚é€šè¿‡ä¸‹è½½[demo](https://truffleframework.com/tutorials/pet-shop)ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„ä¸Šæ‰‹éƒ¨ç½²åˆçº¦ï¼Œå¹¶ä¸”Truffleæœ€è®©äººæƒŠå¹ä¹‹å¤„åœ¨äºå®ƒç”šè‡³æä¾›äº†å’Œnode.js ååŒå¼€å‘web Uiçš„interfaceï¼ŒçœŸçš„å› æ­¤ååˆ†ç¬¦åˆåˆçº§Dapperçš„éœ€æ±‚ã€‚

ç”¨node.jså®‰è£…[Truffle](http://truffleframework.com/)ï¼š

```shell
npm install -g truffle
```



### Ganache

Truffle Suiteæä¾›äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ç§æœ‰é“¾å·¥å…·â€”â€”[Ganache](https://truffleframework.com/ganache)ã€‚Ganacheå¯ä»¥å¿«é€Ÿå¯åŠ¨ä¸ªäººEthereumåŒºå—é“¾ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è¿è¡Œæµ‹è¯•ã€æ‰§è¡Œå‘½ä»¤å’Œæ£€æŸ¥çŠ¶æ€ï¼ŒåŒæ—¶æ§åˆ¶é“¾çš„æ“ä½œæ–¹å¼ã€‚è¿™é‡Œç”¨Ganacheå°±æ˜¯ä¸ºäº†æ–¹ä¾¿åˆ›å»ºaccountsã€‚

Ganacheå¯ä»¥ä»[è¿™é‡Œ](https://truffleframework.com/ganache)ä¸‹è½½ã€‚



### Metamask

â€å°ç‹ç‹¸ğŸ¦Šâ€œâ€”â€”[Metamask](https://www.baidu.com/link?url=Z4VR247io3iusdC172oxR_30-oudflUoRmwQNOjIz6W1q_xhk2hxeuNvb2-QE__6&wd=&eqid=a1c900ef000e79b7000000065c1668fe) æ˜¯ Google Chrome æµè§ˆå™¨çš„æ‰©å±•ï¼Œå°†ä»¥å¤ªåŠä¸ Google Chrome ç»“åˆï¼Œåœ¨ Chrome æµè§ˆå™¨ä¸Šè¿è¡Œä»¥å¤ªåŠ DAppsï¼Œä»¥åŠèº«ä»½è¯†åˆ«çš„å·¥å…·ã€‚äºæ˜¯ï¼Œå®ƒå°±å…·å¤‡äº†ç±»ä¼¼ Mist çš„é’±åŒ…åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ç®¡ç†è‡ªå·±çš„è´¦æˆ·ï¼Œé€šè¿‡ Web3 JavaScript APIï¼Œè®© DApp ä¸ä»¥å¤ªåŠåŒºå—é“¾å®ç°äº¤äº’ã€‚ä»Chrome Extension Storeé‡Œå°±èƒ½ä¸‹è½½Metamaskï¼Œæ³¨å†Œä¸€ä¸ªè´¦æˆ·å°±èƒ½ç”¨äº†ï¼ˆè™½ç„¶æ²¡é’±ğŸ’°ï¼‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹‹åç”¨åˆ°çš„è´¦æˆ·å¹¶ä¸æ˜¯è¿™ä¸ªæ³¨å†Œçš„è´¦æˆ·ï¼Œè€Œæ˜¯Ganacheä¸Šçš„è´¦æˆ·ã€‚åœ¨Chromeä¸Šæ³¨å†Œè´¦æˆ·å¹¶ç™»é™†ã€‚

---

## æ™ºèƒ½åˆçº¦

### Truffleæ¡†æ¶

åˆ›å»ºé¡¹ç›®â€”â€”**Score Chain**ï¼š

```shell
mkdir scorechain
cd scorechain
```

ä½¿ç”¨[truffleframework.com/boxes/][truffleframework.com/boxes/]å¿«é€Ÿå¯åŠ¨å’Œè¿è¡Œã€‚å®‰è£…å® ç‰©å•†åº—demoï¼š

```shell
truffle unbox pet-shop
```

å½“æˆ‘ä»¬çš„æ¡†æ¶å®‰è£…å¥½äº†çš„æ—¶å€™ï¼Œç›®å½•ç»“æ„å¦‚å›¾ï¼š

![](https://ws1.sinaimg.cn/large/006tNbRwgy1fy906jw9m7j30am0k6jsw.jpg)

**truffle.js** æ˜¯truffleæ¡†æ¶å’Œganacheç½‘ç»œè¿æ¥çš„é…ç½®æ–‡ä»¶ï¼Œhostä¸€èˆ¬ç”¨localhostï¼Œ**ç«¯å£å–å†³äºganacheçš„RPC æœåŠ¡å™¨**ï¼ˆ*å¦‚æœç«¯å£é”™äº†åæœŸè®¾è®¡ç½‘é¡µä¼šä¸€ç›´ loading*ï¼‰ã€‚æ–‡ä»¶å†…å®¹ä¸ºï¼š

```js
module.exports = {
  networks: {
    development: {
      host: "127.0.0.1",
      port: 7545,
      network_id: "*" 
    }
  }
};

```

**src**æ˜¯ç½‘é¡µå¼€å‘æºä»£ç ç›®å½•ï¼Œæš‚æ—¶åªç”¨åˆ°äº†**app.js** å’Œ **index.html** è¿™ä¸ªæ–‡ä»¶ã€‚**app.js**è¿™ä¸ªæ–‡ä»¶æ˜¯å‰ç«¯å’Œåç«¯çš„interfaceï¼Œæ˜¯æ•´ä¸ªDappååˆ†é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚**index.html **æ˜¯å‰ç«¯è®¾è®¡æ–‡ä»¶ã€‚

**node_modules** æ˜¯node.jsçš„æ¨¡å—ï¼Œæš‚æ—¶ä¸éœ€è¦ã€‚

**contracts** å°±æ˜¯åˆçº¦ç›®å½•å•¦ï¼ä¹‹åæˆ‘ä»¬çš„åˆçº¦å°±æ˜¯åœ¨è¿™é‡Œå®Œæˆçš„ã€‚åˆçº¦å†™å¥½äº†ä¹‹åéœ€è¦éƒ¨ç½²åœ¨æˆ‘ä»¬ç”¨Ganacheåˆ›å»ºçš„ç§æœ‰é“¾ä¸Šï¼Œéœ€è¦åœ¨**migrations**æ–‡ä»¶å¤¹ä¸‹å†™éƒ¨ç½²æ–‡ä»¶ã€‚å½“éƒ¨ç½²åœ¨ç§æœ‰é“¾ä¸Šçš„æ—¶å€™ï¼Œtruffleæ¡†æ¶ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆbuildï¼Œç¼–è¯‘æˆ‘ä»¬çš„åˆçº¦ã€‚



### åˆçº¦æ‹Ÿå†™

åœ¨contractsç›®å½•ä¸‹ï¼Œå»ºç«‹åˆçº¦æ–‡ä»¶ï¼Œç”¨>=0.4.20 <0.6.1 çš„ solidityç¼–å†™åˆçº¦Scoreï¼ˆæ‰“åˆ†ï¼‰ã€‚

æ„å»ºå­¦ç”Ÿç»“æ„ä½“ï¼š

``` js
    struct Student {
        uint id;
        string name;
        uint selectCount;
    }
```

å»ºç«‹å…³äºå­¦ç”Ÿå’ŒTAçš„æ˜ å°„ï¼Œå¹¶åˆ›å»ºå˜é‡è¢«è¯„æ¬¡æ•°ï¼š

```js
    // Store TAs
    mapping(address => bool) public TAs;
    // Store Students
    mapping(uint => Student) public students;
    // Store Students Count
    uint public scoredTimes;
```

å®šä¹‰æ·»åŠ å­¦ç”Ÿå’ŒTAæ‰“åˆ†å‡½æ•°ï¼š

```js
    function addStudent (string _name) private {
        scoredTimes ++;
        students[scoredTimes] = Student(scoredTimes, _name, 0);
    }

    function select (uint _studentId) public {
        // require that they haven't selected before
        require(!TAs[msg.sender]);

        // require a valid student
        require(_studentId > 0 && _studentId <= scoredTimes);

        // record that TA has selected
        TAs[msg.sender] = true;

        // update student select Count
        students[_studentId].selectCount ++;

        // trigger selected event
        selectEvent(_studentId);
    }
```

æœ€åè¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªé€‰æ‹©å­¦ç”Ÿäº‹ä»¶ï¼š

``` js
    // select event
    event selectEvent (
        uint indexed _studentId
    );
```

è‡³æ­¤ï¼Œåˆçº¦æ‹Ÿå†™æˆåŠŸï¼



### åˆçº¦éƒ¨ç½²

ä¸ºäº†å°†åˆçº¦éƒ¨ç½²åˆ°Ganacheç§æœ‰é“¾ä¸Šï¼Œè¿˜éœ€è¦ä¸€ä¸ªéƒ¨ç½²æ–‡ä»¶ï¼Œåœ¨migrationsç›®å½•ä¸‹éƒ¨ç½²åˆçº¦ï¼š

```js
var Score = artifacts.require("./Score.sol");

module.exports = function(deployer) {
  deployer.deploy(Score);
};

```

æ‰“å¼€Ganacheï¼Œçœ‹çœ‹RPC æœåŠ¡å™¨ï¼ˆ7545ï¼‰æ˜¯å¦å’Œtruffle.js å¯¹åº”ï¼š

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fy929jywaoj31cp0u0jy3.jpg)

éƒ¨ç½²åˆçº¦åˆ°Ganacheç§æœ‰é“¾ï¼š

```shell
truffle migrate --reset // éé¦–æ¬¡éƒ¨ç½²è¦åŠ reset
```

å‡ºç°ä¸‹å›¾ä¸ºæˆåŠŸï¼š

```shell
Using network 'development'.

Running migration: 1_initial_migration.js
  Replacing Migrations...
  ... 0x8006a2052e71652571a823fc4a33f5f88ea1bc76972ef08dafbaade016e330ab
  Migrations: 0x64745cba2a428767a9c6518da9bc5752492fec22
Saving successful migration to network...
  ... 0x42cc99e3517718bb12f89b90f8d86e3e4aad0b91a4a0b28331cf89c817de89c2
Saving artifacts...
Running migration: 2_deploy_contracts.js
  Replacing Score...
  ... 0x24a274ae9c7fba6142290ebcf5b966faafbc4852f0b752022627679fb6bc8c08
  Score: 0xebde42adb74d844988238720c4e50feada2f6f2f
Saving successful migration to network...
  ... 0x7d1aedce77df01a0e77f59ca9f55973fb90ba9cf7d61469f8fcc8dbfb7d1067b
Saving artifacts...
```

æ‰“å¼€truffle consoleï¼Œå£°æ˜åˆçº¦å®ä¾‹ï¼Œæ£€æŸ¥æˆ‘ä»¬éƒ¨ç½²çš„åˆçº¦ï¼š

```shell
$ truffle console // è¿›å…¥console
```

å£°æ˜ä¸€ä¸ªå®ä¾‹ï¼š

``` shell
Score.deployed().then(function(instance) { app = instance }) 
```

çœ‹çœ‹æˆ‘ä»¬æœ‰å¤šå°‘ä¸ªå­¦ç”Ÿï¼ˆ6ä¸ªï¼‰ï¼š

```shell
app.studentsNum()
// æ˜¾ç¤º BigNumber { s: 1, e: 0, c: [ 6 ] }
```

è¿™å°±è¯´æ˜éƒ¨ç½²æˆåŠŸäº†ï¼Œæˆ‘ä»¬å†çœ‹çœ‹é»˜è®¤çš„éƒ¨ç½²ç”¨æˆ·ï¼ŒGanacheçš„**ç”¨æˆ·0**ï¼šå—¯ï¼Œæœç„¶å®ƒä»åŸæ¥çš„100ethå˜å°‘äº†ï¼Œè¯´æ˜éƒ¨ç½²åˆçº¦ç¡®å®æœ‰ä»¥å¤ªå¸çš„èŠ±è´¹ï¼

![](https://ws1.sinaimg.cn/large/006tNbRwgy1fy92bj7i0xj31aj0u0n8d.jpg)

è¿™æ—¶å€™truffleæ¡†æ¶ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ**build/contracts**ï¼Œç›®å½•ä¸‹çš„**Score.json**æ˜¯åˆçº¦çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä¹‹åä¼šåœ¨æˆ‘ä»¬çš„å®¢æˆ·ç«¯å¼€å‘ä¸­ç”¨åˆ°ã€‚



### æµ‹è¯•æ–‡ä»¶

ä¸ºäº†éªŒè¯æˆ‘ä»¬éƒ¨ç½²çš„åˆçº¦æ˜¯å¦æ­£ç¡®ï¼Œè¿˜éœ€è¦è®¾è®¡å‡ ä¸ªæµ‹è¯•ï¼š

```shell 
touch ./test/score.js
```

**score.js**æ˜¯æˆ‘ä»¬çš„æµ‹è¯•æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶ï¼Œè®¾è®¡æµ‹è¯•å‡½æ•°å¦‚ä¸‹ï¼š

```js
it("initializes with six students", function(){...};

it("it initializes the students with the correct values", function() {};

it("allows a TA to cast a select", function() {};

it("throws an exception for invalid students", function() {};
   
it("throws an exception for double selecting", function() {};
```

æŸ¥çœ‹æµ‹è¯•ç»“æœï¼š

```shell
truffle test
```

äº”ä¸ªæµ‹è¯•éƒ½é€šè¿‡äº†ï¼ï¼ï¼

![](https://ws2.sinaimg.cn/large/006tNbRwgy1fy9iyyxc5cj31400mi77x.jpg)



---

## åˆçº¦å®¢æˆ·ç«¯

### æ¥å£è®¾è®¡

åˆå§‹åŒ–Web3:

```js
  initWeb3: function() {
    if (typeof web3 !== 'undefined') {
      App.web3Provider = web3.currentProvider;
      web3 = new Web3(web3.currentProvider);
    } else {
      App.web3Provider = new Web3.providers.HttpProvider('http://localhost:7545');
      web3 = new Web3(App.web3Provider);
    }
    return App.initContract();
  },
```

å°†åˆçº¦åˆå§‹åŒ–ï¼š

```js
  initContract: function() {
    $.getJSON("Score.json", function(score) {
      App.contracts.Score = TruffleContract(score);
      App.contracts.Score.setProvider(App.web3Provider);
      App.listenForEvents();
      return App.render();
    });
  },
```

ç­‰å¾…åˆçº¦emitç»™è§‚å¯Ÿè€…ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ï¼‰ï¼š

```js
  // Listen for events emitted from the contract
  listenForEvents: function() {
    App.contracts.Score.deployed().then(function(instance) {
      instance.selectedEvent({}, {
        fromBlock: 0,
        toBlock: 'latest'
      }).watch(function(error, event) {
        console.log("event triggered", event)
        App.render();
      });
    });
  },
```

renderå°±æ˜¯æˆ‘ä»¬ä¸»è¦æ¥å£äº†ï¼šé¦–å…ˆåŠ è½½äº†6ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼›ç„¶ååŠ è½½äº†åˆçº¦çš„å†…å®¹ï¼ŒåŒ…æ‹¬å¯é€‰å­¦ç”Ÿå’Œç›®å‰å­¦ç”Ÿçš„è¯„åˆ†æƒ…å†µã€‚

```js
  render: function() {
    var scoreInstance;
    var loader = $("#loader");
    var content = $("#content");

    loader.show();
    content.hide();

    // Load account data
    web3.eth.getCoinbase(function(err, account) {
      if (err === null) {
        App.account = account;
        $("#accountAddress").html("Your Account: " + account);
      }
    });

    // Load contract data
    App.contracts.Score.deployed().then(function(instance) {
      scoreInstance = instance;
      return scoreInstance.studentsNum();
    }).then(function(studentsNum) {
      var studentsResults = $("#studentsResults");
      studentsResults.empty();

      var studentsSelect = $('#studentsSelect');
      studentsSelect.empty();

      for (var i = 1; i <= studentsNum; i++) {
        scoreInstance.students(i).then(function(student) {
          var id = student[0];
          var name = student[1];
          var scoredTimes = student[2];

          // Render student Result
          var studentTemplate = "<tr><th>" + id + "</th><td>" + name + "</td><td>" + scoredTimes + "</td></tr>"
          studentsResults.append(studentTemplate);

          // Render student ballot option
          var studentOption = "<option value='" + id + "' >" + name + "</ option>"
          studentsSelect.append(studentOption);
        });
      }
      return scoreInstance.TAs(App.account);
    }).then(function(hasSelected) {
      // Do not allow a user to select
      if(hasSelected) {
        $('form').hide();
      }
      loader.hide();
      content.show();
    }).catch(function(error) {
      console.warn(error);
    });
  },
```

æœ€åå®šä¹‰äº†äº‹ä»¶çš„å‘ç”Ÿ:

```js
  castSelect: function() {
    var studentId = $('#studentsSelect').val();
    App.contracts.Score.deployed().then(function(instance) {
      return instance.select(studentId, { from: App.account });
    }).then(function(result) {
      // Wait for selects to update
      $("#content").hide();
      $("#loader").show();
    }).catch(function(err) {
      console.error(err);
    });
  }
};
```



### å‰ç«¯è®¾è®¡

æœ€åæˆ‘ä»¬è¿˜è®¾è®¡äº†ä¸€ä¸ªå’Œè°å‹å¥½çš„å‰ç«¯ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<body background="https://ws3.sinaimg.cn/large/006tNbRwgy1fy9tabq6tsj30u00yqq3p.jpg">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Score Chain</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container" style="width: 500px;">
      <div class="row">
        <div class="col-lg-12">
          <h1 class="text-center">Score Chain</h1>
          <hr/>
          <br/>
          <div id="loader">
            <p class="text-center">Loading...</p>
          </div>
          <div id="content" style="display: none;">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Name</th>
                  <th scope="col">Selects</th>
                </tr>
              </thead>
              <tbody id="studentsResults">
              </tbody>
            </table>
            <hr/>
            <form onSubmit="App.castSelect(); return false;">
              <div class="form-group">
                <label for="studentsSelect">Select Student</label>
                <select class="form-control" id="studentsSelect">
                </select>
              </div>
              <button type="submit" class="btn btn-primary">Select</button>
              <hr />
            </form>
            <p id="accountAddress" class="text-center"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>

```

Localhost:3000 è¿è¡Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ï¼š

```shell
npm run dev
```

ä¸€ç›´loadingï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„å°ç‹ç‹¸ğŸ¦Šâ€”â€”MetaMaskå°±æ´¾ä¸Šç”¨åœºäº†ï¼

![](https://ws3.sinaimg.cn/bmiddle/006tNbRwgy1fy9ticmhjlj30ji0qw75k.jpg)

æˆ‘ä»¬ç”¨çš„æ˜¯ä¸»ä»¥å¤ªåŠç½‘ç»œï¼Œåº”è¯¥ç”¨Ganacheå®šä¹‰çš„ç§æœ‰é“¾ç«¯å£ï¼š

![](https://ws1.sinaimg.cn/large/006tNbRwgy1fy9tjexikyj31aw0u049e.jpg)

ç‚¹å‡»Costume RPCè®¾ç½®`http://127.0.01:7545`ï¼Œé‡æ–°åŠ è½½ï¼Œé¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼š

![](https://ws2.sinaimg.cn/large/006tNbRwgy1fy9toimy0fj31kf0u0wic.jpg)

ä½†æ˜¯æˆ‘ä»¬æ³¨å†Œçš„è´¦æˆ·æ˜¯æ²¡é’±çš„ï¼Œæ— æ³•åº”ç”¨åˆçº¦ï¼Œæ‰“å¼€Ganacheç§æœ‰é“¾ä¸­çš„ä¸€ä¸ªè´¦æˆ·ï¼Œå¤åˆ¶ç§é’¥ğŸ”‘ï¼Œåœ¨Metamaskä¸Šå¯¼å…¥æ–°è´¦æˆ·ï¼š

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fy9tn9649ej31c80u0q7m.jpg)

æˆ‘ä»¬ä¸ºNinoè¿›è¡Œä¸€æ¬¡æ‰“åˆ†ï¼šé€‰æ‹©Ninoï¼Œç³»ç»Ÿå¼¹å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œç”¨æ¥ç¡®è®¤äº¤æ˜“ã€‚

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fy9ts7z1unj31qy0u0dma.jpg)

**ç„å­¦é—®é¢˜**ï¼šè¿™ä¸ªè¿‡ç¨‹å¯èƒ½æœ‰æ—¶å€™ä¼šå‘ç”Ÿé”™è¯¯ï¼ŒåŸºæœ¬ä¸Šæ˜¯RPCç½‘ç»œè¿æ¥ä¸ä½³ã€ç§æœ‰é“¾è¿æ¥ä¸ç•…é€ æˆçš„ï¼Œ**é‡å¯ç«¯å£**æˆ–è€…**æ›´æ¢ä¸€ä¸ªè´¦å·**æ‰“åˆ†å³å¯ã€‚*

ä¸ºNinoæˆåŠŸæ‰“åˆ†ï¼Œå¯ä»¥çœ‹è§ï¼ŒSelecté€‰æ‹©æ¡†å’ŒæŒ‰é”®æ²¡æœ‰äº†ï¼ˆç›®å‰è§„å®šä¸€ä¸ªè´¦æˆ·ä¸èƒ½é‡å¤æ‰“åˆ†ï¼‰ï¼š

![](https://ws1.sinaimg.cn/large/006tNbRwly1fy9tykd27fj31eq0u040y.jpg)

TA4æ‰“åˆ†æ˜¯éœ€è¦èŠ±é’±çš„ï¼Œå› æ­¤å¯ä»¥çœ‹è§é’±å˜å°‘äº†ï¼š

![](https://ws3.sinaimg.cn/large/006tNbRwgy1fy9u96nc0sj31aa0u0alg.jpg)

å†ç”¨å…¶ä»–è´¦æˆ·ç»™å­¦ç”Ÿä»¬æ‰“åˆ†å§ï¼

![](https://ws4.sinaimg.cn/large/006tNbRwgy1fy9uizt33bj31rq0u07iu.jpg)



### ç³»ç»Ÿè¯´æ˜

å› ä¸ºRPCè¿æ¥ä¸ç¨³å®šï¼Œç»å¸¸ä¼šå‡ºç°æŠ¥é”™ï¼š`txçš„nounceä¸æ­£ç¡®`ï¼Œå› æ­¤éœ€è¦é¢‘ç¹åœ°æ›´æ¢è´¦æˆ·ï¼Œè¿™ä¸ªé—®é¢˜å½±å“äº†ç³»ç»Ÿçš„å®ç”¨æ€§ã€‚å¦å¤–è¿™ä¸ªç³»ç»Ÿæš‚æ—¶ä¸å…è®¸åŒä¸€ä¸ªè´¦æˆ·å¤šæ¬¡æ‰“åˆ†ï¼Œä¸ºäº†ç¡®ä¿æ¯ä¸€æ¬¡æ‰“åˆ†éƒ½å¯ä»¥è¢«æ¸…æ™°åœ°è¿½æº¯ã€‚

---

## å‚è€ƒèµ„æ–™

åƒæ°´ä¸å¿˜æŒ–äº•äººï¼Œåœ¨æ­¤æ„Ÿè°¢ç»™æˆ‘å¸¦æ¥å¸®åŠ©çš„é‡è¦å‚è€ƒï¼š

- [DappUniversity/Election](http://www.dappuniversity.com/articles/the-ultimate-ethereum-dapp-tutorial)
- [TruffleSuite/petshop-demo](https://truffleframework.com/tutorials/pet-shop)
- [solidity-baby-steps/contracts/](https://github.com/cyrusadkisson/solidity-baby-steps/tree/master/contracts)

---

